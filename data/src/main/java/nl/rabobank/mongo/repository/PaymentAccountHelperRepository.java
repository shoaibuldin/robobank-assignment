package nl.rabobank.mongo.repository;import nl.rabobank.enums.AccountType;import nl.rabobank.mongo.factory.AccountDaoFactory;import nl.rabobank.mongo.mapper.AccountMapper;import nl.rabobank.mongo.model.PaymentAccountModel;import nl.rabobank.service.account.Account;import nl.rabobank.service.account.PaymentAccount;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.stereotype.Service;import java.util.Optional;@Servicepublic class PaymentAccountHelperRepository implements AccountDaoFactory {    private final Logger log = LoggerFactory.getLogger(PaymentAccountHelperRepository.class);    private final PaymentAccountRepository paymentAccountRepository;    public PaymentAccountHelperRepository(PaymentAccountRepository paymentAccountRepository) {        this.paymentAccountRepository = paymentAccountRepository;    }    @Override    public Account save(Account account) {        log.debug("Save account : {}", account);        PaymentAccountModel paymentAccountModel = AccountMapper.mapToModel((PaymentAccount) account);        paymentAccountRepository.save(paymentAccountModel);        return AccountMapper.mapFromModel(paymentAccountModel);    }    @Override    public Optional<Account> findByUserId(String userId, AccountType accountType) {        log.debug("Find account by user : {}", userId);        return paymentAccountRepository.findByUserId(userId, accountType)                .map(x -> PaymentAccount.builder()                        .accountNumber(x.getAccountNumber())                        .accountHolderName(x.getAccountHolderName())                        .balance(x.getBalance())                        .userId(userId)                        .type(accountType)                        .build());    }    @Override    public AccountType getType() {        log.debug("Get payment account type: {}");        return AccountType.PAYMENT;    }}